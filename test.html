<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>RoyalGardens</title>
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <meta content="" name="keywords">
  <meta content="" name="description">
  <link href="royalGardens.jpeg" rel="icon">
  <script>
    async function init() {
      await customElements.whenDefined('gmp-map');

      const map = document.querySelector('gmp-map');

      map.innerMap.setOptions({
        mapTypeControl: false
      });

      const locations = [
    { permit_no: "Location 1", coordinates: { lat: 24.4465, lng: 54.4145 }, link: "https://www.google.com/maps?q=24.4465,54.4145", color: 'red' },
    { permit_no: "Location 2", coordinates: { lat: 24.4459, lng: 54.4158 }, link: "https://www.google.com/maps?q=24.4459,54.4158", color: 'red' },
    { permit_no: "Location 3", coordinates: { lat: 24.4481, lng: 54.4101 }, link: "https://www.google.com/maps?q=24.4481,54.4101", color: 'red' },
    { permit_no: "Location 4", coordinates: { lat: 24.4481, lng: 54.4101 }, link: "https://www.google.com/maps?q=24.4481,54.4101", color: 'red' },
    { permit_no: "Location 5", coordinates: { lat: 24.4463, lng: 54.4149 }, link: "https://www.google.com/maps?q=24.4463,54.4149", color: 'red' },
    { permit_no: "Location 6", coordinates: { lat: 24.4461, lng: 54.4154 }, link: "https://www.google.com/maps?q=24.4461,54.4154", color: 'red' },
    { permit_no: "Location 7", coordinates: { lat: 24.4466, lng: 54.4149 }, link: "https://www.google.com/maps?q=24.4466,54.4149", color: 'red' },
    { permit_no: "Location 8", coordinates: { lat: 24.4489, lng: 54.4085 }, link: "https://www.google.com/maps?q=24.4489,54.4085", color: 'red' },
    { permit_no: "Location 9", coordinates: { lat: 24.4494, lng: 54.4077 }, link: "https://www.google.com/maps?q=24.4494,54.4077", color: 'red' },
    { permit_no: "Location 10", coordinates: { lat: 24.4513, lng: 54.4061 }, link: "https://www.google.com/maps?q=24.4513,54.4061", color: 'red' },
    { permit_no: "Location 11", coordinates: { lat: 24.4513, lng: 54.4061 }, link: "https://www.google.com/maps?q=24.4513,54.4061", color: 'red' },
    { permit_no: "Location 12", coordinates: { lat: 24.4479, lng: 54.4136 }, link: "https://www.google.com/maps?q=24.4479,54.4136", color: 'red' },
    { permit_no: "Location 13", coordinates: { lat: 24.4513, lng: 54.4061 }, link: "https://www.google.com/maps?q=24.4513,54.4061", color: 'red' },
    { permit_no: "Location 14", coordinates: { lat: 24.4534, lng: 54.4044 }, link: "https://www.google.com/maps?q=24.4534,54.4044", color: 'red' },
    { permit_no: "Location 15", coordinates: { lat: 24.4544, lng: 54.4041 }, link: "https://www.google.com/maps?q=24.4544,54.4041", color: 'red' },
    { permit_no: "Location 16", coordinates: { lat: 24.4506, lng: 54.4066 }, link: "https://www.google.com/maps?q=24.4506,54.4066", color: 'red' },
    { permit_no: "Location 17", coordinates: { lat: 24.4521, lng: 54.4056 }, link: "https://www.google.com/maps?q=24.4521,54.4056", color: 'red' },
    { permit_no: "Location 18", coordinates: { lat: 24.4524, lng: 54.4054 }, link: "https://www.google.com/maps?q=24.4524,54.4054", color: 'red' },
    { permit_no: "Location 19", coordinates: { lat: 24.4555, lng: 54.4034 }, link: "https://www.google.com/maps?q=24.4555,54.4034", color: 'red' },
    { permit_no: "Location 20", coordinates: { lat: 24.4502, lng: 54.407 }, link: "https://www.google.com/maps?q=24.4502,54.407", color: 'red' },
    { permit_no: "Location 21", coordinates: { lat: 24.4597, lng: 54.4007 }, link: "https://www.google.com/maps?q=24.4597,54.4007", color: 'red' },
    { permit_no: "Location 22", coordinates: { lat: 24.4436, lng: 54.4299 }, link: "https://www.google.com/maps?q=24.4436,54.4299", color: 'red' },
    { permit_no: "Location 23", coordinates: { lat: 24.4501, lng: 54.4072 }, link: "https://www.google.com/maps?q=24.4501,54.4072", color: 'red' },
    { permit_no: "Location 24", coordinates: { lat: 24.4487, lng: 54.4089 }, link: "https://www.google.com/maps?q=24.4487,54.4089", color: 'red' },
    { permit_no: "Location 25", coordinates: { lat: 24.4483, lng: 54.4097 }, link: "https://www.google.com/maps?q=24.4483,54.4097", color: 'red' },
    { permit_no: "Location 26", coordinates: { lat: 24.4469, lng: 54.4097 }, link: "https://www.google.com/maps?q=24.4469,54.4097", color: 'red' },
    { permit_no: "Location 27", coordinates: { lat: 24.4468, lng: 54.4099 }, link: "https://www.google.com/maps?q=24.4468,54.4099", color: 'red' },
    { permit_no: "Location 28", coordinates: { lat: 24.4467, lng: 54.4097 }, link: "https://www.google.com/maps?q=24.4467,54.4097", color: 'red' },
    { permit_no: "Location 29", coordinates: { lat: 24.4467, lng: 54.4097 }, link: "https://www.google.com/maps?q=24.4467,54.4097", color: 'red' }
];

      const markers = locations.map(location => {
        const marker = new google.maps.Marker({
          position: location.coordinates,
          title: location.permit_no,
          label: {
            text: location.permit_no,
            fontWeight: 'bold'
          },
          map: null, // Initially not shown
          icon: {
            url: `http://maps.google.com/mapfiles/ms/icons/${location.color}-dot.png`, // Use red or Blue marker icon based on color
          }
        });

        marker.addListener('click', function () {
          window.open(location.link, '_blank');
        });

        return marker;
      });

      const sidePanel = document.getElementById('side-panel');

      const selectAllCheckbox = document.createElement('input');
      selectAllCheckbox.type = 'checkbox';
      selectAllCheckbox.id = 'select-all';
      selectAllCheckbox.addEventListener('change', (event) => {
        const isChecked = event.target.checked;
        document.querySelectorAll('.location-checkbox').forEach(checkbox => {
          checkbox.checked = isChecked;
          const index = checkbox.dataset.index;
          if (isChecked) {
            markers[index].setMap(map.innerMap);
          } else {
            markers[index].setMap(null);
          }
        });
      });

      const selectAllLabel = document.createElement('label');
      selectAllLabel.htmlFor = 'select-all';
      selectAllLabel.textContent = 'Select All';

      sidePanel.appendChild(selectAllCheckbox);
      sidePanel.appendChild(selectAllLabel);
      sidePanel.appendChild(document.createElement('br'));

      locations.forEach((location, index) => {
        const checkbox = document.createElement('input');
        checkbox.type = 'checkbox';
        checkbox.id = `location-${index}`;
        checkbox.classList.add('location-checkbox');
        checkbox.dataset.index = index;
        checkbox.checked = false;
        checkbox.addEventListener('change', (event) => {
          const isChecked = event.target.checked;
          if (isChecked) {
            markers[index].setMap(map.innerMap);
          } else {
            markers[index].setMap(null);
          }
          updateSelectAllCheckbox();
        });

        const label = document.createElement('label');
        label.htmlFor = `location-${index}`;
        label.textContent = location.permit_no;

        const br = document.createElement('br');

        sidePanel.appendChild(checkbox);
        sidePanel.appendChild(label);
        sidePanel.appendChild(br);
      });

      function updateSelectAllCheckbox() {
        const allChecked = document.querySelectorAll('.location-checkbox:checked').length === locations.length;
        selectAllCheckbox.checked = allChecked;
      }
    }

    document.addEventListener('DOMContentLoaded', init);
  </script>

  <script type="module" src="https://unpkg.com/@googlemaps/extended-component-library@0.6"></script>
  <style>
    html,
    body {
      height: 100%;
      margin-top: 70px;
      padding: 0;
      display: flex;
      width: 100%;
    }

    #side-panel {
      padding: 10px;
      position: fixed;
      top: 100px;
      right: 0;
      background-color: #fff;
      overflow-y: auto;
      height: 100%;
      width: 30%;
      font-size: small;
    }

    #map-container {
      flex: 1;
      height: 100%;
      position: relative;
      overflow: hidden;
    }

    .navbar-custom {
      display: flex;
      align-items: center;
      justify-content: space-around;
      background-color: #ffffff;
      padding: 10px 20px;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 1000;
      /* box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); */
    }

    .navbar-brand {
      display: flex;
      align-items: center;
    }

    .navbar-brand p {
      margin-left: 0px;
      margin-right: 0px;
    }

    .navbar-brand img {
      width: 100px;
      height: 100px;
    }

    .navbar-brand p {
      margin-left: 10px;
      font-size: 20px;
      font-weight: bold;
    }
  </style>
</head>

<body>
  <nav class="navbar navbar-light navbar-expand-xl navbar-custom">
    <div class="navbar-brand">
      <img src="royalGardens.jpeg" alt="Royal Gardens Logo">
    </div>
    <div class="navbar-brand">
      <h2>SW10 - RD </h2>
    </div>
    <div class="navbar-brand">
      <img src="municipality.jpeg" alt="Municipality Logo">
    </div>
  </nav>

  <div id="spinner" class="show w-100 vh-100 bg-white position-fixed translate-middle top-50 start-50 d-flex align-items-center justify-content-center">
    <div class="spinner-grow text-primary" role="status"></div>
  </div>

  <gmpx-api-loader key="AIzaSyCXn3_1o4fZgmtID0onViy02TxBPFBzK7g" solution-channel="GMP_GE_mapsandplacesautocomplete_v1">
  </gmpx-api-loader>
  <div id="map-container">
    <gmp-map center="24.4539,54.3773" zoom="10" map-id="DEMO_MAP_ID" scrollwheel="true"></gmp-map>
  </div>
  <div id="side-panel">
    <h1>RD</h1>
  </div>
</body>

</html>
